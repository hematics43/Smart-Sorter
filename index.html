<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Sorter Pro++ (Colorful + Comma Toggle)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f4f7fb;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      background: #fff;
      width: 100%;
      max-width: 560px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 15px;
      color: #333;
    }
    label {
      font-size: 14px;
      font-weight: 600;
      color: #555;
      display: block;
      margin-bottom: 6px;
    }
    textarea {
      width: 100%;
      height: 120px;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ddd;
      border-radius: 8px;
      resize: vertical;
      margin-bottom: 15px;
    }
    select, button {
      width: 100%;
      padding: 12px;
      font-size: 15px;
      margin-bottom: 12px;
      border-radius: 8px;
      border: 1px solid #ddd;
      cursor: pointer;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }
    .options label {
      font-size: 13px;
      font-weight: normal;
    }
    #toggleViewBtn, #toggleCommaBtn {
      background: #4a90e2;
      color: white;
      border: none;
      font-weight: bold;
    }
    #result {
      background: #f9fafc;
      padding: 12px;
      border: 1px solid #eee;
      border-radius: 8px;
      font-size: 15px;
      min-height: 40px;
      margin-bottom: 10px;
      cursor: pointer;
      user-select: text;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .item {
      padding: 4px 8px;
      border-radius: 6px;
      font-weight: 600;
      color: #fff;
    }
    #result.copied { background: #d4f8d4; transition: background 0.5s; }
    #count {
      font-size: 13px;
      color: #666;
      margin-bottom: 20px;
    }
    #clearBtn {
      background: #ff4d4f;
      color: white;
      border: none;
      font-weight: bold;
    }
    #clearBtn:hover { background: #d9363e; }
  </style>
</head>
<body>
  <div class="container">
    <h2>‚ú® Smart Sorter Pro++</h2>
    
    <label for="input">Enter words or numbers:</label>
    <textarea id="input" placeholder="e.g. apple, banana, 42, 7"></textarea>

    <label for="order">Sort order:</label>
    <select id="order">
      <option value="auto" selected>Auto Detect (Live)</option>
      <option value="alphaAsc">Alphabetical (A ‚Üí Z)</option>
      <option value="alphaDesc">Alphabetical (Z ‚Üí A)</option>
      <option value="numAsc">Numeric (Small ‚Üí Large)</option>
      <option value="numDesc">Numeric (Large ‚Üí Small)</option>
      <option value="original">Original Order</option>
      <option value="reverse">Reverse Original</option>
      <option value="shuffle">Shuffle (Random)</option>
      <option value="lengthAsc">By Length (Short ‚Üí Long)</option>
      <option value="lengthDesc">By Length (Long ‚Üí Short)</option>
    </select>

    <div class="options">
      <label><input type="checkbox" id="unique"> Remove Duplicates</label>
      <label><input type="checkbox" id="uppercase"> UPPERCASE</label>
      <label><input type="checkbox" id="lowercase"> lowercase</label>
      <label><input type="checkbox" id="capitalize"> Capitalize</label>
      <label><input type="checkbox" id="reverseEach"> Reverse Each Word</label>
    </div>

    <button id="toggleViewBtn">Switch to List View</button>
    <button id="toggleCommaBtn">Hide Commas</button>

    <label>Result (double-click to copy):</label>
    <div id="result">‚ö†Ô∏è Start typing above‚Ä¶</div>
    <div id="count"></div>

    <button id="clearBtn">üóëÔ∏è Clear Saved Data</button>
  </div>

  <script>
    const inputEl = document.getElementById("input");
    const orderEl = document.getElementById("order");
    const uniqueEl = document.getElementById("unique");
    const upperEl = document.getElementById("uppercase");
    const lowerEl = document.getElementById("lowercase");
    const capEl = document.getElementById("capitalize");
    const reverseEachEl = document.getElementById("reverseEach");
    const resultEl = document.getElementById("result");
    const countEl = document.getElementById("count");
    const clearBtn = document.getElementById("clearBtn");
    const toggleViewBtn = document.getElementById("toggleViewBtn");
    const toggleCommaBtn = document.getElementById("toggleCommaBtn");

    let viewMode = "inline";
    let showCommas = true;

    const colors = [
      "#e74c3c","#3498db","#2ecc71","#9b59b6",
      "#f39c12","#1abc9c","#e67e22","#34495e",
      "#16a085","#d35400","#c0392b","#2980b9"
    ];

    function capitalizeWord(word) {
      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
    }

    function detectDataType(items) {
      let numbers = 0, words = 0;
      items.forEach(item => !isNaN(parseFloat(item)) ? numbers++ : words++);
      return numbers > words ? "numeric" : "text";
    }

    function sortItems() {
      let input = inputEl.value.trim();
      let order = orderEl.value;

      if (!input) {
        resultEl.textContent = "‚ö†Ô∏è Please enter some values.";
        countEl.textContent = "";
        saveState();
        return;
      }

      let items = input.split(/[\s,]+/).filter(Boolean);
      if (uniqueEl.checked) items = [...new Set(items)];

      if (order === "auto") order = detectDataType(items) === "numeric" ? "numAsc" : "alphaAsc";

      let sorted;
      switch(order) {
        case "alphaAsc": sorted = [...items].sort((a,b)=>a.localeCompare(b)); break;
        case "alphaDesc": sorted = [...items].sort((a,b)=>b.localeCompare(a)); break;
        case "numAsc": sorted = [...items].sort((a,b)=>parseFloat(a)-parseFloat(b)); break;
        case "numDesc": sorted = [...items].sort((a,b)=>parseFloat(b)-parseFloat(a)); break;
        case "reverse": sorted = [...items].reverse(); break;
        case "shuffle": sorted = [...items].sort(()=>Math.random()-0.5); break;
        case "lengthAsc": sorted = [...items].sort((a,b)=>a.length-b.length); break;
        case "lengthDesc": sorted = [...items].sort((a,b)=>b.length-a.length); break;
        default: sorted = items;
      }

      if (upperEl.checked) sorted = sorted.map(x=>x.toUpperCase());
      else if (lowerEl.checked) sorted = sorted.map(x=>x.toLowerCase());
      else if (capEl.checked) sorted = sorted.map(x=>capitalizeWord(x));
      if (reverseEachEl.checked) sorted = sorted.map(x=>x.split("").reverse().join(""));

      // colorful rendering
      resultEl.innerHTML = "";
      sorted.forEach((item, i) => {
        const span = document.createElement("span");
        span.className = "item";
        span.style.backgroundColor = colors[i % colors.length];
        span.textContent = item;
        resultEl.appendChild(span);

        if (viewMode === "inline" && i < sorted.length-1 && showCommas) {
          const comma = document.createElement("span");
          comma.textContent = ", ";
          resultEl.appendChild(comma);
        }
        if (viewMode === "list") resultEl.appendChild(document.createElement("br"));
      });

      countEl.textContent = `Count: ${sorted.length}`;
      saveState();
    }

    function saveState() {
      const state = {
        input: inputEl.value, order: orderEl.value,
        unique: uniqueEl.checked, uppercase: upperEl.checked,
        lowercase: lowerEl.checked, capitalize: capEl.checked,
        reverseEach: reverseEachEl.checked,
        viewMode, showCommas
      };
      localStorage.setItem("smartSorterState", JSON.stringify(state));
    }

    function loadState() {
      const state = JSON.parse(localStorage.getItem("smartSorterState"));
      if (!state) return;
      inputEl.value = state.input || "";
      orderEl.value = state.order || "auto";
      uniqueEl.checked = state.unique || false;
      upperEl.checked = state.uppercase || false;
      lowerEl.checked = state.lowercase || false;
      capEl.checked = state.capitalize || false;
      reverseEachEl.checked = state.reverseEach || false;
      viewMode = state.viewMode || "inline";
      showCommas = state.showCommas ?? true;
      toggleViewBtn.textContent = viewMode==="list" ? "Switch to Inline View" : "Switch to List View";
      toggleCommaBtn.textContent = showCommas ? "Hide Commas" : "Show Commas";
      sortItems();
    }

    clearBtn.addEventListener("click", () => {
      localStorage.removeItem("smartSorterState");
      inputEl.value = "";
      orderEl.value = "auto";
      uniqueEl.checked = upperEl.checked = lowerEl.checked = capEl.checked = reverseEachEl.checked = false;
      viewMode="inline";
      showCommas=true;
      toggleViewBtn.textContent = "Switch to List View";
      toggleCommaBtn.textContent = "Hide Commas";
      resultEl.textContent="‚ö†Ô∏è Start typing above‚Ä¶";
      countEl.textContent="";
    });

    toggleViewBtn.addEventListener("click", () => {
      viewMode = viewMode==="inline" ? "list" : "inline";
      toggleViewBtn.textContent = viewMode==="list" ? "Switch to Inline View" : "Switch to List View";
      sortItems();
    });

    toggleCommaBtn.addEventListener("click", () => {
      showCommas = !showCommas;
      toggleCommaBtn.textContent = showCommas ? "Hide Commas" : "Show Commas";
      sortItems();
    });

    resultEl.addEventListener("dblclick", () => {
      const text = Array.from(resultEl.querySelectorAll(".item"))
                        .map(el=>el.textContent)
                        .join(viewMode==="list" ? "\n" : (showCommas ? ", " : " "));
      if (text) {
        navigator.clipboard.writeText(text).then(() => {
          resultEl.classList.add("copied");
          setTimeout(() => resultEl.classList.remove("copied"), 800);
        });
      }
    });

    [inputEl, orderEl, uniqueEl, upperEl, lowerEl, capEl, reverseEachEl].forEach(el=>{
      el.addEventListener("input", sortItems);
      el.addEventListener("change", sortItems);
    });

    window.addEventListener("load", loadState);
  </script>
</body>
</html>
