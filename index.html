<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Sorter Pro+ Keyboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f4f7fb;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      background: #fff;
      width: 100%;
      max-width: 480px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 15px;
      color: #333;
    }
    label {
      font-size: 14px;
      font-weight: 600;
      color: #555;
      display: block;
      margin-bottom: 6px;
    }
    textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ddd;
      border-radius: 8px;
      resize: vertical;
      margin-bottom: 10px;
    }
    .keyboard {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      margin-bottom: 15px;
    }
    .keyboard button {
      padding: 10px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      background: #e4e9f2;
      cursor: pointer;
      transition: background 0.2s;
    }
    .keyboard button:hover {
      background: #4a90e2;
      color: white;
    }
    .keyboard .wide {
      grid-column: span 2;
    }
    .keyboard .space {
      grid-column: span 5;
    }
    select, #order {
      width: 100%;
      padding: 12px;
      font-size: 15px;
      margin-bottom: 12px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }
    .options label {
      font-size: 13px;
      font-weight: normal;
    }
    .options input { margin-right: 4px; }
    .view-toggle {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }
    .view-toggle button {
      flex: 1;
      padding: 10px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      background: #e4e9f2;
      color: #333;
      transition: background 0.3s;
    }
    .view-toggle button.active {
      background: #4a90e2;
      color: white;
    }
    #result {
      background: #f9fafc;
      padding: 12px;
      border: 1px solid #eee;
      border-radius: 8px;
      font-size: 14px;
      min-height: 40px;
      white-space: pre-wrap;
    }
    #count {
      margin-top: 8px;
      font-size: 13px;
      color: #666;
    }
    #clearBtn {
      margin-top: 15px;
      width: 100%;
      padding: 12px;
      background: #ff4d4f;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    #clearBtn:hover {
      background: #d9363e;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‚ú® Smart Sorter Pro+ (Keyboard)</h2>
    
    <label for="input">Enter words or numbers:</label>
    <textarea id="input" placeholder="e.g. apple, banana, 42, 7"></textarea>

    <!-- Virtual Keyboard -->
    <div class="keyboard" id="keyboard"></div>

    <label for="order">Sort order:</label>
    <select id="order">
      <option value="auto" selected>Auto Detect (Live)</option>
      <option value="alphaAsc">Alphabetical (A ‚Üí Z)</option>
      <option value="alphaDesc">Alphabetical (Z ‚Üí A)</option>
      <option value="numAsc">Numeric (Small ‚Üí Large)</option>
      <option value="numDesc">Numeric (Large ‚Üí Small)</option>
      <option value="original">Original Order</option>
      <option value="reverse">Reverse Original</option>
      <option value="shuffle">Shuffle (Random)</option>
    </select>

    <div class="options">
      <label><input type="checkbox" id="unique"> Remove Duplicates</label>
      <label><input type="checkbox" id="uppercase"> UPPERCASE</label>
      <label><input type="checkbox" id="lowercase"> lowercase</label>
      <label><input type="checkbox" id="capitalize"> Capitalize</label>
    </div>

    <div class="view-toggle">
      <button id="inlineBtn" class="active">Inline View</button>
      <button id="listBtn">List View</button>
    </div>

    <label>Result:</label>
    <div id="result">‚ö†Ô∏è Start typing above‚Ä¶</div>
    <div id="count"></div>

    <button id="clearBtn">üóëÔ∏è Clear Saved Data</button>
  </div>

  <script>
    const inputEl = document.getElementById("input");
    const keyboardEl = document.getElementById("keyboard");
    const clearBtn = document.getElementById("clearBtn");

    // Generate keyboard layout
    const keys = [
      ..."1234567890",
      ..."QWERTYUIOP",
      ..."ASDFGHJKL",
      ..."ZXCVBNM",
      "Space", "Backspace", "Enter", "Clear"
    ];

    keys.forEach(key => {
      const btn = document.createElement("button");
      btn.textContent = key.length === 1 ? key : key;
      if (key === "Space") btn.classList.add("space");
      if (["Backspace","Enter","Clear"].includes(key)) btn.classList.add("wide");
      btn.addEventListener("click", () => handleKeyPress(key));
      keyboardEl.appendChild(btn);
    });

    function handleKeyPress(key) {
      if (key === "Space") inputEl.value += " ";
      else if (key === "Enter") inputEl.value += "\n";
      else if (key === "Backspace") inputEl.value = inputEl.value.slice(0, -1);
      else if (key === "Clear") inputEl.value = "";
      else inputEl.value += key;
      sortItems();
    }

    // --- Sorting Logic (same as before, shortened for clarity) ---
    const orderEl = document.getElementById("order");
    const uniqueEl = document.getElementById("unique");
    const upperEl = document.getElementById("uppercase");
    const lowerEl = document.getElementById("lowercase");
    const capEl = document.getElementById("capitalize");
    const resultEl = document.getElementById("result");
    const countEl = document.getElementById("count");
    const inlineBtn = document.getElementById("inlineBtn");
    const listBtn = document.getElementById("listBtn");

    let viewMode = "inline";

    function capitalizeWord(word) {
      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
    }
    function detectDataType(items) {
      let numbers = 0, words = 0;
      items.forEach(item => !isNaN(parseFloat(item)) ? numbers++ : words++);
      return numbers > words ? "numeric" : "text";
    }

    function sortItems() {
      let input = inputEl.value.trim();
      let order = orderEl.value;

      if (!input) {
        resultEl.textContent = "‚ö†Ô∏è Please enter some values.";
        countEl.textContent = "";
        saveState();
        return;
      }
      let items = input.split(/[\s,]+/).filter(Boolean);
      if (uniqueEl.checked) items = [...new Set(items)];
      if (order === "auto") order = detectDataType(items) === "numeric" ? "numAsc" : "alphaAsc";

      let sorted;
      switch(order) {
        case "alphaAsc": sorted = [...items].sort((a,b)=>a.localeCompare(b)); break;
        case "alphaDesc": sorted = [...items].sort((a,b)=>b.localeCompare(a)); break;
        case "numAsc": sorted = [...items].sort((a,b)=>parseFloat(a)-parseFloat(b)); break;
        case "numDesc": sorted = [...items].sort((a,b)=>parseFloat(b)-parseFloat(a)); break;
        case "reverse": sorted = [...items].reverse(); break;
        case "shuffle": sorted = [...items].sort(()=>Math.random()-0.5); break;
        default: sorted = items;
      }
      if (upperEl.checked) sorted = sorted.map(x=>x.toUpperCase());
      else if (lowerEl.checked) sorted = sorted.map(x=>x.toLowerCase());
      else if (capEl.checked) sorted = sorted.map(x=>capitalizeWord(x));

      resultEl.textContent = viewMode==="list" ? sorted.join("\n") : sorted.join(", ");
      countEl.textContent = `Count: ${sorted.length}`;
      saveState();
    }

    // Save + Load state
    function saveState() {
      const state = {
        input: inputEl.value, order: orderEl.value,
        unique: uniqueEl.checked, uppercase: upperEl.checked,
        lowercase: lowerEl.checked, capitalize: capEl.checked,
        viewMode
      };
      localStorage.setItem("smartSorterState", JSON.stringify(state));
    }
    function loadState() {
      const state = JSON.parse(localStorage.getItem("smartSorterState"));
      if (!state) return;
      inputEl.value = state.input || "";
      orderEl.value = state.order || "auto";
      uniqueEl.checked = state.unique || false;
      upperEl.checked = state.uppercase || false;
      lowerEl.checked = state.lowercase || false;
      capEl.checked = state.capitalize || false;
      viewMode = state.viewMode || "inline";
      (viewMode==="list"?listBtn:inlineBtn).classList.add("active");
      sortItems();
    }

    // Clear saved
    clearBtn.addEventListener("click", () => {
      localStorage.removeItem("smartSorterState");
      inputEl.value = "";
      orderEl.value = "auto";
      uniqueEl.checked = upperEl.checked = lowerEl.checked = capEl.checked = false;
      viewMode="inline";
      inlineBtn.classList.add("active");
      listBtn.classList.remove("active");
      resultEl.textContent="‚ö†Ô∏è Start typing above‚Ä¶";
      countEl.textContent="";
    });

    // Toggle view
    inlineBtn.addEventListener("click", ()=>{viewMode="inline";inlineBtn.classList.add("active");listBtn.classList.remove("active");sortItems();});
    listBtn.addEventListener("click", ()=>{viewMode="list";listBtn.classList.add("active");inlineBtn.classList.remove("active");sortItems();});

    [inputEl, orderEl, uniqueEl, upperEl, lowerEl, capEl].forEach(el=>{
      el.addEventListener("input", sortItems);
      el.addEventListener("change", sortItems);
    });

    window.addEventListener("load", loadState);
  </script>
</body>
</html>
